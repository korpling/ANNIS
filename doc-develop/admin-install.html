<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ANNIS: Installing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="annis_64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ANNIS
   &#160;<span id="projectnumber">3.4.0-preview6</span>
   </div>
   <div id="projectbrief">An open source, versatile web browser-based search and visualization architecture for complex multilevel linguistic corpora with diverse types of annotation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('admin-install.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Installing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#admin-install-server">Installing an ANNIS public server </a></li>
<li class="level1"><a href="#admin-install-kickstarter">Installing a local version (ANNIS Kickstarter)     </a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="admin-install-server"></a>
Installing an ANNIS public server </h1>
<p>The ANNIS server version can be installed on UNIX based server, or else under Windows using Cygwin [<a href="http://www.cygwin.com/">http://www.cygwin.com/</a>], the freely available UNIX emulator. To install the ANNIS server:</p>
<ol type="1">
<li>Download and install PostgreSQL 9.3 or a newer version for your operating system from <a href="http://www.postgresql.org/download/">http://www.postgresql.org/download/</a> and <b>make a note of the administrator password</b> you set during the installation. <dl class="section note"><dt>Note</dt><dd>Under Linux, you might have to set the PostgreSQL password manually. E.g. on Ubuntu you can achieve this with by running the following commands: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo -u postgres psql</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;\password</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;\q</div>
</div><!-- fragment --></dd></dl>
</li>
<li>Make sure you have <b>installed <a href="http://java.sun.com/javase/downloads/index.jsp">JDK 7 or a later version</a></b></li>
<li><b>Install a Java Servlet Container</b> ("Java web server") such as <a href="http://tomcat.apache.org/">Tomcat</a> or <a href="http://www.mortbay.org/jetty/">Jetty</a> (or install them if you don’t)</li>
<li><b>Download</b> the ANNIS service distribution file <code>annis-service-&lt;version&gt;-distribution.tar.gz</code> from our website and then <b>unzip</b> the downloaded file: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;tar xzvf annis-service-&lt;version&gt;-distribution.tar.gz -C &lt;installation directory&gt;</div>
</div><!-- fragment --></li>
<li>Set the <b>environment variables</b> (each time when starting up) <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;export ANNIS_HOME=&lt;installation directory&gt;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;export PATH=$PATH:$ANNIS_HOME/bin</div>
</div><!-- fragment --></li>
<li>Next <b>initialize</b> your ANNIS database (only the first time you use the system). When the ANNIS service is normally installed, it assumes it can get PostgreSQL super user rights for this step. Thus you need the superuser password. <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;annis-admin.sh init -u &lt;username&gt; -d &lt;dbname&gt; --schema &lt;schema&gt; -p &lt;new user password&gt;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;-P &lt;postgres superuser password&gt;</div>
</div><!-- fragment --> This call will <ul>
<li>
create a new database with the name given by the "-d" parameter <ul>
<li>
create a <a href="http://www.postgresql.org/docs/9.1/static/ddl-schemas.html">PostgreSQL schema</a>, you should use a schema name the corresponds to the ANNIS version to make an upgrade easier (e.g. you can name it "v31" for ANNIS 3.1.0) </li>
<li>
create a new PostgreSQL user with the user name given by the "-u" parameter and the password given by the "-p" parameter </li>
<li>
create all necessary tables, PSQL functions and initial data in the database</li>
</ul>
If you want to have parallel installations of ANNIS inside the same database you can use the <code>--schema</code> parameter to define a <a href="http://www.postgresql.org/docs/9.1/static/ddl-schemas.html">PostgreSQL schema</a> other than the default <code>public</code> schema. You can also omit the PostgreSQL administrator password option (<code>-P</code>) if you don't have access to the administrator password. In this case the database and the user must already exist. To manually create a user and a database the PostgreSQL adminstrator should execute the following: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;CREATE LANGUAGE plpgsql; -- ignore the error if the language is already installed</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;CREATE USER myuser PASSWORD &#39;mypassword&#39;;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;CREATE DATABASE mydb OWNER myuser ENCODING &#39;UTF8&#39;;</div>
</div><!-- fragment --> <dl class="section warning"><dt>Warning</dt><dd>Do not use "postgres" as database name for ANNIS since it is reserved by PostgresSQL itself.</dd></dl>
</li>
</ul>
</li>
<li>Have a look in the file <code>conf/annis-service.properties</code> and check if you need to change any of the configuration variables.</li>
<li>Now you can <b>import</b> some corpora: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;annis-admin.sh import path/to/corpus1 path/to/corpus2 ...</div>
</div><!-- fragment --> <dl class="section warning"><dt>Warning</dt><dd>The above import-command calls other PostgreSQL database commands. If you abort the import script with Ctrl+C, these SQL processes will not be automatically terminated; instead they might keep hanging and prevent access to the database. The same might happen if you close your shell before the import script terminates, so you will want to prefix it with the "nohup"- command.</dd></dl>
</li>
<li>Now you are ready to <b>start</b> the ANNIS service: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;annis-service.sh start</div>
</div><!-- fragment --> If you don't want to use any authentification and every user should see every corpus without login you can start ANNIS with <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;annis-service-no-security.sh start</div>
</div><!-- fragment --> instead of the default script.</li>
<li>To get the ANNIS <b>front-end</b> running, first download annis- gui-&lt;version&gt;.war from our website and deploy it to your Java servlet container (this is depending on the servlet container you use).</li>
<li>Configure users and groups as described <a class="el" href="admin-configure-service.html#admin-configure-user">here</a> and define who is allowed to see which corpus.</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>We also <b>strongly recommend</b> reconfiguring the Postgres server’s default settings as described <a class="el" href="admin-configure-postgresql.html">here</a>.</dd></dl>
<h1><a class="anchor" id="admin-install-kickstarter"></a>
Installing a local version (ANNIS Kickstarter)     </h1>
<p>Local users who do not wish to make their corpora available online can install ANNIS Kickstarter under most versions of Linux, Windows and Mac OS. To install Kickstarter follow these steps:</p>
<ol type="1">
<li>Download and install PostgreSQL 9.2 for your operating system from <a href="http://www.postgresql.org/download/">http://www.postgresql.org/download/</a> and <b>make a note of the administrator password</b> you set during the installation. <dl class="section note"><dt>Note</dt><dd>Under Linux, you might have to set the PostgreSQL password manually. E.g. on Ubuntu you can achieve this with by running the following commands: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo -u postgres psql</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;\password</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;\q</div>
</div><!-- fragment --></dd></dl>
After installation, PostgreSQL may automatically launch the PostgreSQL Stack Builder to download additional components – you can safely skip this step and cancel the Stack Builder if you wish. You may need to restart your OS if the Postgres installer tells you to.</li>
<li>Download and the ANNIS Kickstarter ZIP-file for your version from the ANNIS website.</li>
<li>Start AnnisKickstarter.bat if you’re using Windows, AnnisKickstarter.cmd on Mac or run the bash script AnnisKickstarter.sh otherwise (this may take a few seconds the first time you run Kickstarter). At this point your Firewall may try to block Kickstarter and offer you to unblock it – do so and Kickstarter should start up. <dl class="section note"><dt>Note</dt><dd>For most users it is a good idea to give Java more memory (if this is not already the default). You can do this by editing the script AnnisKickstarter and typing the following after the call to start java (before -splash:splashscreen.gif): <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;-Xss1024k -Xmx1024m</div>
</div><!-- fragment --> (To accelerate searches it is also possible to give the Postgres database more memory, see the link in the next section below).</dd></dl>
</li>
<li>Once the program has started, if this is the first time you run Kickstarter, press “Init Database” and supply your PostGres administrator password from step 1.</li>
<li>Download and unzip the <a href="http://korpling.german.hu-berlin.de/~annis/downloads/sample_corpora/pcc2_relAnnis.zip">pcc2 demo corpus</a> from the ANNIS website.</li>
<li>Press “Import Corpus” and navigate to the directory containing the directory pcc2_v2_relAnnis/. Select this directory (but do not go into it) and press OK.</li>
<li>Once import is complete, press "Launch Annis frontend" and test the corpus (try selecting the pcc2 corpus, typing pos="NN" in the AnnisQL box and clicking “Show Result”. See the section “Running Queries in ANNIS” in this guide for some more example queries, or press the Tutorial button at the top left of the interface). </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="admin.html">Administration</a></li>
    <li class="footer">Generated on Mon Nov 2 2015 14:21:01 for ANNIS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>